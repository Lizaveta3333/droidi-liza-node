<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Droidy</title>
  <style>
    body { font-family: "Segoe UI", sans-serif; margin: 30px; background:#f5f5f5; color:#222; }
    h1 { text-align:center; }
    form { display:grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:10px; margin-bottom:20px; }
    input,button { padding:10px; border-radius:8px; border:1px solid #ccc; }
    button { cursor:pointer; background:#007bff; color:white; }
    button:hover { background:#0056b3; }
    table { width:100%; border-collapse:collapse; background:white; border-radius:8px; overflow:hidden; }
    th,td { padding:10px; border-bottom:1px solid #ddd; text-align:left; }
    th { background:#fafafa; }
    tr:hover { background:#f9f9f9; }
  </style>
</head>
<body>
  <h1>ü§ñ Lista droid√≥w</h1>
  <form id="form">
    <input id="nazwa" placeholder="Nazwa" required>
    <input id="typ" placeholder="Typ" required>
    <input id="producent" placeholder="Producent" required>
    <input id="rok_produkcji" type="number" placeholder="Rok produkcji" required>
    <input id="status" placeholder="Status" required>
    <button type="submit">üíæ Zapisz</button>
  </form>

  <table>
    <thead>
      <tr><th>ID</th><th>Nazwa</th><th>Typ</th><th>Producent</th><th>Rok</th><th>Status</th><th>Akcje</th></tr>
    </thead>
    <tbody id="lista"></tbody>
  </table>

  <script>
    const API = '/api/droidy';
    async function load() {
      const res = await fetch(API);
      const data = await res.json();
      const tbody = document.getElementById('lista');
      tbody.innerHTML = '';
      data.forEach(d => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${d.id}</td>
          <td>${d.nazwa}</td>
          <td>${d.typ}</td>
          <td>${d.producent}</td>
          <td>${d.rok_produkcji}</td>
          <td>${d.status}</td>
          <td><button onclick="del(${d.id})">üóëÔ∏è</button></td>`;
        tbody.appendChild(tr);
      });
    }

    document.getElementById('form').addEventListener('submit', async e => {
      e.preventDefault();
      const body = {
        nazwa: nazwa.value,
        typ: typ.value,
        producent: producent.value,
        rok_produkcji: rok_produkcji.value,
        status: status.value
      };
      await fetch(API, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(body) });
      e.target.reset();
      load();
    });

    async function del(id) {
      await fetch(`${API}/${id}`, { method:'DELETE' });
      load();
    }

    load();
  </script>
</body>
</html>